import{f as _,a as V}from"./index-3b05413c.js";import{d as g,K as k,Q as h,O as b,P as F,L as N,W as y,n as c,C as E,X as A,Y as D,T as U,U as $,o as I,g as R,w as r,V as i,b as a,e as v,t as L,i as f}from"./index-bb1bbfdc.js";/* empty css              */const P=g({components:{NButton:k,NCard:h,NForm:b,NFormItem:F,NInput:N,NSpace:y},setup(){const e=U(),o=c(null),u=E(),d=c(0),l=c({password:"",code:"",repassword:"",mail:""});return{formValue:l,countdown:d,formRef:o,handleValidateClick(p){var s;p.preventDefault(),(s=o.value)==null||s.validate(async t=>{if(!A(l.value.password)){u.error("密码只允许5到16位的字母或数字");return}if(console.log("s"),console.log("d"),l.value.password!=l.value.repassword){u.error("两次输入的密码不一致");return}if(t){u.error("请检查您的信息");return}(await _(l.value.mail,l.value.password,l.value.code)).message=="修改成功！"?(u.success("修改密码成功"),e.push({name:"Login"})):u.error("邮箱或验证码错误")})},async getVerificationCode(){if(d.value>0)return;const p=l.value.mail;try{if(!D(l.value.mail)){u.error("请输入正确的邮箱");return}if((await V(p)).message=="邮件发送成功"){u.success("验证码已经发送成功！请查收邮箱"),d.value=60;const t=setInterval(()=>{d.value-=1,d.value<=0&&clearInterval(t)},1e3)}else u.error("验证码发送失败！请检查邮箱")}catch{u.error("请在一分钟后输入正确的邮箱")}}}}}),S={class:"text-center mt-2"},T=f("a",null,[f("span",{class:"linkcolor"}," 返回登录")],-1);function K(e,o,u,d,l,p){const s=i("n-input"),t=i("n-form-item"),m=i("n-button"),C=i("router-link"),w=i("n-form"),B=i("n-card");return I(),R(B,{class:"element"},{default:r(()=>[a(w,{ref:"formRef","label-width":80,model:e.formValue},{default:r(()=>[a(t,{label:"邮箱",path:"mail"},{default:r(()=>[a(s,{value:e.formValue.mail,"onUpdate:value":o[0]||(o[0]=n=>e.formValue.mail=n),placeholder:"输入邮箱"},null,8,["value"])]),_:1}),a(t,{label:"验证码",path:"code"},{default:r(()=>[a(s,{value:e.formValue.code,"onUpdate:value":o[1]||(o[1]=n=>e.formValue.code=n),placeholder:"输入邮箱验证码"},null,8,["value"]),a(m,{onClick:e.getVerificationCode,disabled:e.countdown>0},{default:r(()=>[v(L(e.countdown>0?`${e.countdown}s`:"获取验证码"),1)]),_:1},8,["onClick","disabled"])]),_:1}),a(t,{label:"新的密码",path:"password"},{default:r(()=>[a(s,{value:e.formValue.password,"onUpdate:value":o[2]||(o[2]=n=>e.formValue.password=n),type:"password",placeholder:"输入新的密码"},null,8,["value"])]),_:1}),a(t,{label:"确认密码",path:"repassword"},{default:r(()=>[a(s,{value:e.formValue.repassword,"onUpdate:value":o[3]||(o[3]=n=>e.formValue.repassword=n),type:"password",placeholder:"重复输入新的密码"},null,8,["value"])]),_:1}),a(t,null,{default:r(()=>[a(m,{type:"primary",class:"full-width-button",onClick:e.handleValidateClick},{default:r(()=>[v(" 修改密码 ")]),_:1},8,["onClick"])]),_:1}),f("p",S,[a(C,{to:"/login"},{default:r(()=>[T]),_:1})])]),_:1},8,["model"])]),_:1})}const W=$(P,[["render",K]]);export{W as default};
